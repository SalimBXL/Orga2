
<%# YEAR %>
<div style="display: flex; flex-direction: row;  justify-content: center;"
>
    <% indexSemaineAnnee = 0 %>
    <% dateJour = @firstDayOfCalendar %>

    <% 12.times do |indexMonth| %>
        <% indexMonth += 1 %>

        <%# MONTH %>
        <% nomMois = (dateJour + 15.days).strftime("%b") %>
        <% nombreSemainesDansMois = (dateJour.end_of_month.strftime("%W").to_i) - (dateJour.beginning_of_month.strftime("%W").to_i) %>

        <div class="w3-text-grey"
            style="display: flex; flex-direction: column; marging-left: 8px;">
            <div><%= nomMois %></div>

            <div class="w3-text-grey"
                style="display: flex; flex-direction: row;">

                <% nombreSemainesDansMois.times do |indexSemaine| %>
                    <% indexSemaine += 1 %>
                    <% indexSemaineAnnee += 1 %>

                    <%# WEEK %>
                    <div class="w3-text-grey"
                        style="display: flex; flex-direction: column; justify-content: flex-start;">
                        <div class="text-secondary">
                            <% indexSemaineAnnee %>
                        </div>
                        <% 7.times do |indexJour| %>
                            <% indexJour += 1 %>

                            <%# DAY %>
                            <% if dateJour.saturday? || dateJour.sunday? %>
                                <% bgColor = "lightgrey" %>
                            <% else %>
                                <% dateJourFormated = dateJour.strftime("%Y-%m-%d") %>
                                <% if @data[dateJourFormated] %>
                                    <% bgColor = getHeatMapColor(@data[dateJourFormated]) %>
                                <% else %>
                                    <% bgColor = "white" %>
                                <% end %>
                            <% end %>
                            <div 
                                class="w3-text-grey heatmap-cell-width w3-<%= bgColor %>"
                                style="align-content: center;  border: grey 0.5px solid;"        
                                >
                                <%= dateJour.day %>
                            </div>

                            <% dateJour = dateJour + 1.day %>
                        <% end %>
                    </div>
                <% end %>
            </div>
        </div>
    <% end %>
</div>